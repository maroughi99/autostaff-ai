(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{98040:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(34788).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3614:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(34788).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},16118:function(e,t,s){Promise.resolve().then(s.bind(s,88215))},88215:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(27573),l=s(79217),n=s(7653),r=s(30999),c=s(34788);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var i=s(3614),o=s(98040);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,c.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function x(){let{user:e}=(0,l.aF)(),[t,s]=(0,n.useState)({totalLeads:0,totalMessages:0,newLeads:0,contactedLeads:0,qualifiedLeads:0,wonLeads:0,lostLeads:0}),[c,x]=(0,n.useState)([]),[j,p]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(null==e?void 0:e.id)&&N()},[e]);let N=async()=>{try{let[t,a]=await Promise.all([fetch("http://localhost:3001/leads?userId=".concat(null==e?void 0:e.id)),fetch("http://localhost:3001/messages?userId=".concat(null==e?void 0:e.id))]),l=await t.json(),n=await a.json();s({totalLeads:l.length,totalMessages:n.length,newLeads:l.filter(e=>"new"===e.stage).length,contactedLeads:l.filter(e=>"contacted"===e.stage).length,qualifiedLeads:l.filter(e=>"qualified"===e.stage).length,wonLeads:l.filter(e=>"won"===e.stage).length,lostLeads:l.filter(e=>"lost"===e.stage).length}),x(n.slice(0,5))}catch(e){console.error("Failed to fetch stats:",e)}finally{p(!1)}},v=e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/6e4);if(a<1)return"Just now";if(a<60)return"".concat(a," minute").concat(a>1?"s":""," ago");let l=Math.floor(a/60);if(l<24)return"".concat(l," hour").concat(l>1?"s":""," ago");let n=Math.floor(l/24);return"".concat(n," day").concat(n>1?"s":""," ago")};return j?(0,a.jsx)("div",{className:"p-6 flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading dashboard..."})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(m,{title:"Total Leads",value:t.totalLeads.toString(),change:"".concat(t.newLeads," new"),icon:(0,a.jsx)(d,{className:"h-5 w-5 text-primary"})}),(0,a.jsx)(m,{title:"Total Messages",value:t.totalMessages.toString(),change:"".concat(t.contactedLeads," contacted"),icon:(0,a.jsx)(i.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsx)(m,{title:"Won Deals",value:t.wonLeads.toString(),change:"".concat(t.qualifiedLeads," qualified"),icon:(0,a.jsx)(o.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsx)(m,{title:"Conversion",value:t.totalLeads>0?"".concat(Math.round(t.wonLeads/t.totalLeads*100),"%"):"0%",change:"".concat(t.lostLeads," lost"),icon:(0,a.jsx)(u,{className:"h-5 w-5 text-primary"})})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Recent Messages"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:c.length>0?c.map(e=>(0,a.jsx)(f,{icon:"inbound"===e.direction?(0,a.jsx)(i.Z,{className:"h-5 w-5 text-blue-500"}):(0,a.jsx)(i.Z,{className:"h-5 w-5 text-purple-500"}),title:e.subject||"".concat("inbound"===e.direction?"Received from":"Sent to"," ").concat(e.fromEmail||e.toEmail),time:v(e.createdAt)},e.id)):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No recent messages"})})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Pipeline Overview"})}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h,{stage:"New",count:t.newLeads,color:"bg-blue-500",total:t.totalLeads}),(0,a.jsx)(h,{stage:"Contacted",count:t.contactedLeads,color:"bg-purple-500",total:t.totalLeads}),(0,a.jsx)(h,{stage:"Qualified",count:t.qualifiedLeads,color:"bg-green-500",total:t.totalLeads}),(0,a.jsx)(h,{stage:"Won",count:t.wonLeads,color:"bg-emerald-500",total:t.totalLeads}),(0,a.jsx)(h,{stage:"Lost",count:t.lostLeads,color:"bg-gray-500",total:t.totalLeads})]})})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"AI Agent Status"})}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsx)(g,{name:"Inbox Agent",status:"Active",processed:"45 messages",statusColor:"text-green-500"}),(0,a.jsx)(g,{name:"Lead Handler",status:"Active",processed:"12 leads",statusColor:"text-green-500"}),(0,a.jsx)(g,{name:"Follow-Up Agent",status:"Scheduled",processed:"Next run: 2:00 PM",statusColor:"text-blue-500"})]})})]})]})}function m(e){let{title:t,value:s,change:l,icon:n}=e;return(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.aY,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:t}),n]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:s}),(0,a.jsxs)("div",{className:"text-sm text-green-500 mt-1",children:[l," from last week"]})]})})}function f(e){let{icon:t,title:s,time:l}=e;return(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"mt-0.5",children:t}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:s}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]})]})}function h(e){let{stage:t,count:s,color:l,total:n}=e,r=n>0?s/n*100:0;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:t}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:[s," (",Math.round(r),"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,a.jsx)("div",{className:"".concat(l," h-2 rounded-full"),style:{width:"".concat(r,"%")}})})]})}function g(e){let{name:t,status:s,processed:l,statusColor:n}=e;return(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:t}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(n),children:s})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l})]})}},30999:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},Zb:function(){return r},aY:function(){return i},ll:function(){return d}});var a=s(27573),l=s(7653),n=s(33061);let r=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});r.displayName="Card";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...l})});c.displayName="CardHeader";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});d.displayName="CardTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})}).displayName="CardDescription";let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...l})});i.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"},33061:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(90794),l=s(59654);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,a.W)(t))}}},function(e){e.O(0,[217,832,293,16,744],function(){return e(e.s=16118)}),_N_E=e.O()}]);