(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{64296:function(e,t,s){Promise.resolve().then(s.bind(s,48346))},48346:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var a=s(27573),n=s(79217),l=s(7653),i=s(30999),r=s(60044),o=s(88151),d=s(61541),c=s(90747),m=s(66120),x=s(92447),u=s(17216),h=s(28695),p=s(47103),f=s(33061);let g=x.fC;x.ZA;let j=x.B4,v=l.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsxs)(x.xz,{ref:t,className:(0,f.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[n,(0,a.jsx)(x.JO,{asChild:!0,children:(0,a.jsx)(u.Z,{className:"h-4 w-4 opacity-50"})})]})});v.displayName=x.xz.displayName;let b=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(x.u_,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})});b.displayName=x.u_.displayName;let N=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(x.$G,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})});N.displayName=x.$G.displayName;let y=l.forwardRef((e,t)=>{let{className:s,children:n,position:l="popper",...i}=e;return(0,a.jsx)(x.h_,{children:(0,a.jsxs)(x.VY,{ref:t,className:(0,f.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,a.jsx)(b,{}),(0,a.jsx)(x.l_,{className:(0,f.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(N,{})]})})});y.displayName=x.VY.displayName,l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(x.__,{ref:t,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",s),...n})}).displayName=x.__.displayName;let w=l.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsxs)(x.ck,{ref:t,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(x.wU,{children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(x.eT,{children:n})]})});w.displayName=x.ck.displayName,l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(x.Z0,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=x.Z0.displayName;var C=s(17811),F=s(47841),S=s(80214);let z=[{id:"new",label:"New",color:"bg-blue-500"},{id:"contacted",label:"Contacted",color:"bg-purple-500"},{id:"qualified",label:"Qualified",color:"bg-green-500"},{id:"won",label:"Won",color:"bg-emerald-500"},{id:"lost",label:"Lost",color:"bg-gray-500"}];function T(){let{user:e}=(0,n.aF)(),[t,s]=(0,l.useState)([]),[x,u]=(0,l.useState)(!0),[h,p]=(0,l.useState)(null),[f,b]=(0,l.useState)(null),[N,T]=(0,l.useState)(null),[k,D]=(0,l.useState)(""),[R,A]=(0,l.useState)(!1),[P,q]=(0,l.useState)({name:"",email:"",phone:"",priority:"medium",source:"manual"}),[I,Z]=(0,l.useState)(!1),[$,L]=(0,l.useState)({title:"",description:"",notes:"",taxRate:0,discount:0,expiresAt:"",items:[]}),O=(0,C.Dy)((0,C.VT)(C.we,{activationConstraint:{distance:8}}));(0,l.useEffect)(()=>{(null==e?void 0:e.id)&&V()},[e]);let V=async()=>{try{let t=await fetch("http://localhost:3001/leads?userId=".concat(null==e?void 0:e.id)),a=await t.json();s(a)}catch(e){console.error("Failed to fetch leads:",e)}finally{u(!1)}},_=async(e,t)=>{try{await fetch("http://localhost:3001/leads/".concat(e,"/stage"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({stage:t})}),V()}catch(e){console.error("Failed to update lead:",e)}},Q=e=>t.filter(t=>t.stage===e),E=e=>{switch(e){case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},B=e=>{p(e.active.id)},M=e=>{let{active:s,over:a}=e;if(!a){p(null);return}let n=s.id,l=a.id,i=t.find(e=>e.id===n);i&&i.stage!==l&&_(n,l),p(null)},H=()=>{p(null)},J=t.find(e=>e.id===h);(0,l.useEffect)(()=>{f&&Y(f)},[f]);let Y=async e=>{try{let t=await fetch("http://localhost:3001/leads/".concat(e)),s=await t.json();console.log("Lead details received:",s),console.log("Messages:",s.messages),console.log("Quotes:",s.quotes),T(s),D(s.notes||""),Z(!1),L({title:"",description:"",notes:"",taxRate:0,discount:0,expiresAt:"",items:[]})}catch(e){console.error("Failed to fetch lead details:",e)}},U=async()=>{if(f)try{await fetch("http://localhost:3001/leads/".concat(f),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:k})}),Y(f)}catch(e){console.error("Failed to save notes:",e)}},K=async()=>{if((null==e?void 0:e.id)&&P.name)try{await fetch("http://localhost:3001/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...P,userId:e.id})}),A(!1),q({name:"",email:"",phone:"",priority:"medium",source:"manual"}),V()}catch(e){console.error("Failed to create lead:",e)}},G=e=>{b(e)},W=()=>{b(null),T(null)},X=e=>{L({...$,items:$.items.filter((t,s)=>s!==e)})},ee=(e,t,s)=>{let a=[...$.items];a[e]={...a[e],[t]:s},L({...$,items:a})},et=()=>$.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0),0),es=()=>et()*($.taxRate/100),ea=async()=>{if(f&&0!==$.items.length)try{await fetch("http://localhost:3001/quotes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:f,title:$.title,description:$.description,notes:$.notes,items:$.items.map(e=>({description:e.description,quantity:e.quantity||1,unitPrice:e.unitPrice||0})),taxRate:$.taxRate,discount:$.discount,expiresAt:$.expiresAt?new Date($.expiresAt):void 0})}),Y(f),Z(!1),L({title:"",description:"",notes:"",taxRate:0,discount:0,expiresAt:"",items:[]})}catch(e){console.error("Failed to create quote:",e)}},en=async e=>{try{await fetch("http://localhost:3001/quotes/".concat(e,"/send"),{method:"POST"}),f&&Y(f)}catch(e){console.error("Failed to send quote:",e)}};return x?(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading leads..."})})}):(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Leads CRM"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your leads through the sales pipeline"})]}),(0,a.jsx)(c.z,{onClick:()=>A(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:opacity-90",children:"+ New Lead"})]}),(0,a.jsxs)(C.LB,{sensors:O,collisionDetection:C.ey,onDragStart:B,onDragEnd:M,onDragCancel:H,children:[(0,a.jsx)("div",{className:"grid grid-cols-5 gap-4",children:z.map(e=>{let s=Q(e.id);return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,a.jsx)("h2",{className:"font-semibold text-lg",children:e.label}),(0,a.jsx)(r.C,{variant:"secondary",className:"ml-auto",children:s.length})]}),(0,a.jsx)("div",{className:"h-1 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-full rounded-full ".concat(e.color),style:{width:"".concat(s.length/Math.max(t.length,1)*100,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-3 flex-1 min-h-[200px] p-2 bg-gray-50 rounded-lg",onDragOver:e=>e.preventDefault(),onDrop:()=>{},"data-stage":e.id,children:[s.map(t=>(0,a.jsx)("div",{draggable:!0,onDragStart:e=>{e.dataTransfer.effectAllowed="move",B({active:{id:t.id}})},onDragEnd:e=>{let s=document.elementFromPoint(e.clientX,e.clientY),a=null==s?void 0:s.closest("[data-stage]"),n=null==a?void 0:a.getAttribute("data-stage");n?M({active:{id:t.id},over:{id:n}}):H()},children:(0,a.jsx)(i.Zb,{className:"p-4 hover:shadow-lg transition-shadow cursor-move",onClick:e=>{(e.currentTarget===e.target||e.currentTarget.contains(e.target))&&G(t.id)},children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:t.name}),(0,a.jsx)(r.C,{variant:E(t.priority),children:t.priority})]}),t.email&&(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate",children:t.email}),t.phone&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.phone}),t.messages[0]&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 p-2 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:t.messages[0].subject}),(0,a.jsxs)("p",{className:"truncate mt-1",children:[t.messages[0].content.substring(0,60),"..."]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:["new"!==e.id&&(0,a.jsx)("button",{onClick:()=>{let s=z.findIndex(t=>t.id===e.id);s>0&&_(t.id,z[s-1].id)},className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"← Back"}),"won"!==e.id&&"lost"!==e.id&&(0,a.jsx)("button",{onClick:()=>{let s=z.findIndex(t=>t.id===e.id);s<z.length-1&&_(t.id,z[s+1].id)},className:"text-xs px-2 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:opacity-90 rounded ml-auto",children:"Next →"})]})]})})},t.id)),0===s.length&&(0,a.jsx)("div",{className:"text-center text-gray-400 text-sm py-8",children:"No leads in this stage"})]})]},e.id)})}),(0,a.jsx)(C.y9,{children:J?(0,a.jsx)(i.Zb,{className:"p-4 shadow-2xl opacity-90 rotate-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:J.name}),(0,a.jsx)(r.C,{variant:E(J.priority),children:J.priority})]}),J.email&&(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate",children:J.email})]})}):null})]}),(0,a.jsx)(o.Vq,{open:!!f,onOpenChange:e=>!e&&W(),children:(0,a.jsx)(o.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.fK,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.$N,{className:"text-2xl",children:N.name}),(0,a.jsxs)(o.Be,{className:"mt-2",children:[N.email&&(0,a.jsx)("span",{className:"block",children:N.email}),N.phone&&(0,a.jsx)("span",{className:"block",children:N.phone})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.C,{variant:E(N.priority),children:N.priority}),(0,a.jsx)(r.C,{variant:"outline",children:N.stage})]})]})}),(0,a.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Source"}),(0,a.jsx)("p",{className:"font-medium",children:N.source||"Unknown"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Created"}),(0,a.jsx)("p",{className:"font-medium",children:new Date(N.createdAt).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Conversation History"}),(0,a.jsx)("div",{className:"space-y-4",children:N.messages&&N.messages.length>0?N.messages.map(e=>(0,a.jsx)(i.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-semibold text-sm",children:["inbound"===e.direction?"From":"To"," ",e.fromEmail||e.toEmail]}),e.subject&&(0,a.jsx)("p",{className:"font-medium mt-1",children:e.subject})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[new Date(e.createdAt).toLocaleDateString()," ",new Date(e.createdAt).toLocaleTimeString()]}),(0,a.jsx)(r.C,{variant:"outline",className:"mt-1",children:e.channel})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-700 mt-2 p-3 bg-gray-50 rounded",children:e.content})]})},e.id)):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No messages yet"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Notes"}),(0,a.jsx)(d.g,{placeholder:"Add internal notes about this lead...",value:k,onChange:e=>D(e.target.value),rows:4,className:"w-full"}),(0,a.jsx)(c.z,{onClick:U,className:"mt-2 bg-gradient-to-r from-blue-500 to-purple-500 hover:opacity-90",children:"Save Notes"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Quotes"}),(0,a.jsx)(c.z,{onClick:()=>Z(!I),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:opacity-90",children:I?"Cancel":"+ New Quote"})]}),I&&(0,a.jsx)(i.Zb,{className:"p-4 mb-4 border-2 border-purple-200",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Title"}),(0,a.jsx)(m.I,{placeholder:"Project Name",value:$.title,onChange:e=>L({...$,title:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(d.g,{placeholder:"Brief description of the work...",value:$.description,onChange:e=>L({...$,description:e.target.value}),rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Line Items"}),(0,a.jsx)(c.z,{onClick:()=>{L({...$,items:[...$.items,{description:"",quantity:1,unitPrice:0}]})},variant:"outline",size:"sm",children:"+ Add Item"})]}),(0,a.jsx)("div",{className:"space-y-3",children:$.items.map((e,t)=>(0,a.jsx)(i.Zb,{className:"p-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,a.jsx)("div",{className:"col-span-5",children:(0,a.jsx)(m.I,{placeholder:"Description",value:e.description,onChange:e=>ee(t,"description",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(m.I,{type:"number",placeholder:"Qty",value:e.quantity,onChange:e=>ee(t,"quantity",parseFloat(e.target.value))})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(m.I,{type:"number",placeholder:"Price",value:e.unitPrice,onChange:e=>ee(t,"unitPrice",parseFloat(e.target.value))})}),(0,a.jsxs)("div",{className:"col-span-2 text-right font-medium",children:["$",((e.quantity||0)*(e.unitPrice||0)).toFixed(2)]}),(0,a.jsx)("button",{onClick:()=>X(t),className:"col-span-1 text-red-500 hover:text-red-700",children:"\xd7"})]})},t))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Tax Rate (%)"}),(0,a.jsx)(m.I,{type:"number",placeholder:"0",value:$.taxRate,onChange:e=>L({...$,taxRate:parseFloat(e.target.value)||0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Discount ($)"}),(0,a.jsx)(m.I,{type:"number",placeholder:"0",value:$.discount,onChange:e=>L({...$,discount:parseFloat(e.target.value)||0})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Valid Until"}),(0,a.jsx)(m.I,{type:"date",value:$.expiresAt,onChange:e=>L({...$,expiresAt:e.target.value})})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",et().toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:["Tax (",$.taxRate,"%):"]}),(0,a.jsxs)("span",{className:"font-medium",children:["$",es().toFixed(2)]})]}),$.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,a.jsx)("span",{children:"Discount:"}),(0,a.jsxs)("span",{className:"font-medium",children:["-$",$.discount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["$",(et()+es()-$.discount).toFixed(2)]})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Notes"}),(0,a.jsx)(d.g,{placeholder:"Additional notes or terms...",value:$.notes,onChange:e=>L({...$,notes:e.target.value}),rows:3})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.z,{onClick:ea,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 hover:opacity-90",disabled:0===$.items.length,children:"Create Quote"}),(0,a.jsx)(c.z,{onClick:()=>Z(!1),variant:"outline",children:"Cancel"})]})]})}),N.quotes&&N.quotes.length>0?(0,a.jsx)("div",{className:"space-y-2",children:N.quotes.map(e=>{var t;return(0,a.jsx)(i.Zb,{className:"p-4 hover:border-purple-200 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.title||"Quote ".concat(e.quoteNumber)}),(0,a.jsx)(r.C,{variant:"sent"===e.status?"default":"outline",children:e.status})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," items"]}),(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["$",e.total.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsxs)(c.z,{onClick:()=>(0,F.fC)(e,"AutoStaff AI"),size:"sm",variant:"outline",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4 mr-1"}),"PDF"]}),"draft"===e.status&&(0,a.jsx)(c.z,{onClick:()=>en(e.id),size:"sm",className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:opacity-90",children:"Send"})]})]})]})},e.id)})}):!I&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:'No quotes yet. Click "New Quote" to create one.'})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading lead details..."})})})}),(0,a.jsx)(o.Vq,{open:R,onOpenChange:A,children:(0,a.jsxs)(o.cZ,{children:[(0,a.jsxs)(o.fK,{children:[(0,a.jsx)(o.$N,{children:"Create New Lead"}),(0,a.jsx)(o.Be,{children:"Manually add a new lead to your CRM"})]}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Name *"}),(0,a.jsx)(m.I,{placeholder:"John Doe",value:P.name,onChange:e=>q({...P,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,a.jsx)(m.I,{type:"email",placeholder:"john@example.com",value:P.email,onChange:e=>q({...P,email:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Phone"}),(0,a.jsx)(m.I,{type:"tel",placeholder:"(555) 123-4567",value:P.phone,onChange:e=>q({...P,phone:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Priority"}),(0,a.jsxs)(g,{value:P.priority,onValueChange:e=>q({...P,priority:e}),children:[(0,a.jsx)(v,{children:(0,a.jsx)(j,{})}),(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{value:"low",children:"Low"}),(0,a.jsx)(w,{value:"medium",children:"Medium"}),(0,a.jsx)(w,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)(c.z,{onClick:K,disabled:!P.name,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 hover:opacity-90",children:"Create Lead"}),(0,a.jsx)(c.z,{variant:"outline",onClick:()=>A(!1),children:"Cancel"})]})]})]})})]})}},60044:function(e,t,s){"use strict";s.d(t,{C:function(){return r}});var a=s(27573);s(7653);var n=s(69484),l=s(33061);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:s}),t),...n})}},90747:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(27573),n=s(7653),l=s(50432),i=s(69484),r=s(33061);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:d=!1,...c}=e,m=d?l.g7:"button";return(0,a.jsx)(m,{className:(0,r.cn)(o({variant:n,size:i,className:s})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,s){"use strict";s.d(t,{Ol:function(){return r},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=s(27573),n=s(7653),l=s(33061);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...n})});r.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},88151:function(e,t,s){"use strict";s.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cZ:function(){return x},fK:function(){return u},hg:function(){return d}});var a=s(27573),n=s(7653),l=s(87245),i=s(57342),r=s(33061);let o=l.fC,d=l.xz,c=l.h_;l.x8;let m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});m.displayName=l.aV.displayName;let x=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[n,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.VY.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});h.displayName=l.Dx.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});p.displayName=l.dk.displayName},66120:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(27573),n=s(7653),l=s(33061);let i=n.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},61541:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var a=s(27573),n=s(7653),l=s(33061);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});i.displayName="Textarea"},47841:function(e,t,s){"use strict";s.d(t,{fC:function(){return n}});var a=s(32903);function n(e,t){(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AutoStaff AI",s=new a.ZP;s.setFillColor(59,130,246),s.rect(0,0,220,40,"F"),s.setTextColor(255,255,255),s.setFontSize(24),s.setFont("helvetica","bold"),s.text(t,20,25),s.setFontSize(10),s.setFont("helvetica","normal"),s.text("Professional Quote",20,33),s.setTextColor(0,0,0),s.setFontSize(10),s.text("Quote #".concat(e.quoteNumber),150,25),s.text("Date: ".concat(new Date(e.createdAt).toLocaleDateString()),150,31),e.expiresAt&&s.text("Valid Until: ".concat(new Date(e.expiresAt).toLocaleDateString()),150,37),s.setFontSize(12),s.setFont("helvetica","bold"),s.text("Bill To:",20,55),s.setFontSize(10),s.setFont("helvetica","normal");let n=62;if(s.text(e.lead.name,20,n),e.lead.email&&(n+=6,s.text(e.lead.email,20,n)),e.lead.phone&&(n+=6,s.text(e.lead.phone,20,n)),e.lead.address&&(n+=6,s.text(e.lead.address,20,n)),n+=15,e.title&&(s.setFontSize(14),s.setFont("helvetica","bold"),s.text(e.title,20,n),n+=8),e.description){s.setFontSize(10),s.setFont("helvetica","normal");let t=s.splitTextToSize(e.description,170);s.text(t,20,n),n+=6*t.length}if(n+=10,s.setFillColor(59,130,246),s.rect(20,n-5,170,8,"F"),s.setTextColor(255,255,255),s.setFontSize(10),s.setFont("helvetica","bold"),s.text("Description",22,n),s.text("Qty",120,n),s.text("Unit Price",140,n),s.text("Total",170,n),s.setTextColor(0,0,0),s.setFont("helvetica","normal"),n+=8,e.items.forEach((e,t)=>{n>270&&(s.addPage(),n=20),t%2==0&&(s.setFillColor(245,245,245),s.rect(20,n-5,170,7,"F"));let a=s.splitTextToSize(e.description,90);s.text(a,22,n),s.text(e.quantity.toString(),120,n),s.text("$".concat(e.unitPrice.toFixed(2)),140,n),s.text("$".concat(e.total.toFixed(2)),170,n),n+=Math.max(7,5*a.length)}),n+=10,s.setDrawColor(200,200,200),s.line(120,n,190,n),n+=7,s.setFont("helvetica","normal"),s.text("Subtotal:",120,n),s.text("$".concat(e.subtotal.toFixed(2)),170,n),n+=6,e.tax>0&&(s.text("Tax:",120,n),s.text("$".concat(e.tax.toFixed(2)),170,n),n+=6),e.discount>0&&(s.setTextColor(34,197,94),s.text("Discount:",120,n),s.text("-$".concat(e.discount.toFixed(2)),170,n),s.setTextColor(0,0,0),n+=6),s.setDrawColor(0,0,0),s.line(120,n,190,n),n+=7,s.setFontSize(12),s.setFont("helvetica","bold"),s.text("Total:",120,n),s.text("$".concat(e.total.toFixed(2)),170,n),e.notes){(n+=15)>260&&(s.addPage(),n=20),s.setFontSize(10),s.setFont("helvetica","bold"),s.text("Notes & Terms:",20,n),n+=6,s.setFont("helvetica","normal");let t=s.splitTextToSize(e.notes,170);s.text(t,20,n)}let l=s.getNumberOfPages();for(let e=1;e<=l;e++)s.setPage(e),s.setFontSize(8),s.setTextColor(150,150,150),s.text("".concat(t," - Page ").concat(e," of ").concat(l),105,290,{align:"center"});return s})(e,t).save("Quote-".concat(e.quoteNumber,".pdf"))}},33061:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(90794),n=s(59654);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[443,928,217,832,498,283,631,293,16,744],function(){return e(e.s=64296)}),_N_E=e.O()}]);